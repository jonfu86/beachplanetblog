function Queue(){var t=Q.defer(),e=Q.defer();return{put:function(e){var n=Q.defer();t.resolve({head:e,tail:n.promise}),t.resolve=n.resolve},get:function(){var n=t.promise.get("head");return t.promise=t.promise.get("tail"),n.fail(function(t){throw e.resolve(t),t})},closed:e.promise,close:function(n){n=n||Error("Can't get value from closed queue");var i={head:Q.reject(n)};return i.tail=i,t.resolve(i),e.promise}}}var Q=require("./q");module.exports=Queue;