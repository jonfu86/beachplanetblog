montageDefine("d2f6328","benchmark/compare-with-callbacks",{dependencies:["../q","fs"],factory:function(t){"use strict";var e=t("../q"),n=t("fs");suite("A single simple async operation",function(){bench("with an immediately-fulfilled promise",function(t){e().then(t)}),bench("with direct setImmediate usage",function(t){setImmediate(t)}),bench("with direct setTimeout(â€¦, 0)",function(t){setTimeout(t,0)})}),suite("A fs.readFile",function(){var t=e.denodeify(n.readFile);set("iterations",1e3),set("delay",1e3),bench("directly, with callbacks",function(t){n.readFile(__filename,t)}),bench("with Q.nfcall",function(t){e.nfcall(n.readFile,__filename).then(t)}),bench("with a Q.denodeify'ed version",function(e){t(__filename).then(e)}),bench("with manual usage of deferred.makeNodeResolver",function(t){var a=e.defer();n.readFile(__filename,a.makeNodeResolver()),a.promise.then(t)})}),suite("1000 operations in parallel",function(){function t(t,e){var n=0;return function(){++n===t&&e()}}var n=1e3;bench("with immediately-fulfilled promises",function(a){for(var i=t(n,a),s=0;n>s;++s)e().then(i)}),bench("with direct setImmediate usage",function(e){for(var a=t(n,e),i=0;n>i;++i)setImmediate(a)})})}});