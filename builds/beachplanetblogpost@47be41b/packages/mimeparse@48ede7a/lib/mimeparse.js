function parseRanges(e){for(var i=[],t=e.split(","),s=0;t.length>s;s++)i.push(exports.parseMediaRange(t[s]));return i}exports.parseMimeType=function(e){for(var i,t,s={},a=e.split(";"),u=0;a.length>u;u++){var n=a[u].split("=");2===n.length&&(s[n[0].trim()]=n[1].trim())}return i=a[0].replace(/^\s+/,"").replace(/\s+$/,""),"*"===i&&(i="*/*"),t=i.split("/"),[t[0],t[1],s]},exports.parseMediaRange=function(e){var i,t=exports.parseMimeType(e);return t[2].q?(i=parseFloat(t[2].q),isNaN(i)?t[2].q="1":(i>1||0>i)&&(t[2].q="1")):t[2].q="1",t},exports.fitnessAndQualityParsed=function(e,i){for(var t=-1,s=0,a=exports.parseMediaRange(e),u=a[0],n=a[1],r=a[2],l=0;i.length>l;l++){var o=i[l],c=o[0],m=o[1],d=o[2];if(!(c!==u&&"*"!==c&&"*"!==u||m!==n&&"*"!==m&&"*"!==n)){var p=0;for(var v in r)"q"!==v&&d[v]&&d[v]===r[v]&&(p+=1);var g=c===u?100:0;g+=m===n?10:0,g+=p,g>t&&(t=g,s=d.q)}}return[t,parseFloat(s)]},exports.qualityParsed=function(e,i){return exports.fitnessAndQualityParsed(e,i)[1]},exports.quality=function(e,i){return exports.qualityParsed(e,parseRanges(i))},exports.bestMatch=function(e,i){for(var t=parseRanges(i),s=[],a=0;e.length>a;a++)s.push([exports.fitnessAndQualityParsed(e[a],t),e[a]]);return s.sort(),s[s.length-1][0][1]?s[s.length-1][1]:""};