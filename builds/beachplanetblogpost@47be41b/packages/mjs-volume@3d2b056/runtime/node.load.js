montageDefine("3d2b056","runtime/node",{dependencies:["montage","runtime/component-3d","runtime/transform","runtime/animation","runtime/dependencies/gl-matrix"],factory:function(t,e){t("montage").Montage;var n=t("runtime/component-3d").Component3D,i=t("runtime/transform").Transform,a=t("runtime/animation").BasicAnimation;t("runtime/dependencies/gl-matrix"),e.Node=n.specialize({constructor:{value:function(){this.super(),this._hidden=!1,this._visibility="visible",this._offsetTransform=Object.create(i).init(),this.addOwnPropertyChangeListener("hidden",this),this.addOwnPropertyChangeListener("visibility",this),this.addOwnPropertyChangeListener("offsetTransform",this),this.addOwnPropertyChangeListener("originVector",this),this.addOwnPropertyChangeListener("glTFElement",this),this.addOwnPropertyChangeListener("transformOrigin",this),this.addOwnPropertyChangeListener("transformZOrigin",this),this.addOwnPropertyChangeListener("cursor",this)}},animationDidStart:{value:function(){}},animationDidStop:{value:function(){}},animationDidUpdate:{value:function(){}},handleGlTFElementChange:{value:function(){this.handleHiddenChange(),this.handleVisibilityChange(),this.handleOffsetTransformChange(),this.handleOriginVectorChange(),this.handleTransformOriginChange(),this.handleTransformZOriginChange(),this._applyCSSPropertyWithValueForState(this.__STYLE_DEFAULT__,"offsetTransform",this._offsetTransform)}},handleHiddenChange:{value:function(){null!=this.glTFElement&&(this.glTFElement.hidden=this._hidden,this.scene.dispatchEventNamed("materialUpdate",!0,!1,this))}},handleVisibilityChange:{value:function(){null!=this.glTFElement&&(this.glTFElement.hidden=this.visibility?"hidden"===this.visibility:!1,this.scene.dispatchEventNamed("materialUpdate",!0,!1,this))}},offsetTransform_animationSetter:{set:function(t){this._offsetTransform=t,this.handleOffsetTransformChange()}},handleCursorChange:{value:function(){this.scene.dispatchEventNamed("cursorUpdate",!0,!1,this.cursor)}},handleTransformOriginChange:{value:function(){var t=this.transformOrigin;null==t&&(t=this.initialValueForStyleableProperty("transformOrigin")),this.originVector=vec3.createFrom(t[0],t[1],this.transformZOrigin)}},handleTransformZOriginChange:{value:function(){var t=this.transformOrigin;null==t&&(t=this.initialValueForStyleableProperty("transformOrigin")),this.originVector=vec3.createFrom(t[0],t[1],this.transformZOrigin)}},handleOffsetTransformChange:{value:function(){null!=this.glTFElement&&(this.glTFElement._offsetTransform=this._offsetTransform,this.scene.dispatchEventNamed("materialUpdate",!0,!1,this))}},handleOriginVectorChange:{value:function(){null!=this.glTFElement&&(this.glTFElement._originVector=this._originVector,this.scene.dispatchEventNamed("materialUpdate",!0,!1,this))}},_hidden:{value:!1,writable:!0},hidden:{set:function(t){this._hidden!=t&&(this.visibility=t===!0?"hidden":"visible",this._hidden=t)},get:function(){return this._hidden}},_visibility:{value:!1,writable:!0},visibility:{set:function(t){this._visibility=t},get:function(){return this._visibility}},_transform:{value:null,writable:!0},transform:{set:function(t){this._transform=t},get:function(){return this._transform}},_offsetTransform:{value:null,writable:!0},offsetTransform:{set:function(t){if(this.glTFElement){var e=this.scene.glTFElement.animationManager;if(e.removeAnimationWithTargetAndPath(this,"offsetTransform_animationSetter"),this._style&&this._style.transitions){var n=this._style.transitions.offsetTransform;if(null!=n&&n.duration>0){this._offsetTransform.matrix=this._offsetTransform.matrix,fromTr=this._offsetTransform,toTr=t;var i=Object.create(a).init();return i.path="offsetTransform_animationSetter",i.target=this,i.delegate=this,i.from=fromTr,i.to=toTr,i.duration=1e3*n.duration,e.playAnimation(i),i.animationWasAddedToTarget(),e.evaluateAtTime(Date.now()),void 0}}}this._offsetTransform=t},get:function(){return this._offsetTransform}},_originVector:{value:null,writable:!0},originVector:{set:function(t){this._originVector=t},get:function(){return this._originVector}},_transformOrigin:{value:null,writable:!0},transformOrigin:{set:function(t){this._transformOrigin=t},get:function(){return this._transformOrigin}},_transformZOrigin:{value:50,writable:!0},transformZOrigin:{set:function(t){this._transformZOrigin=t},get:function(){return this._transformZOrigin}},_observers:{value:null,writable:!0},addObserver:{value:function(t){null==this._observers&&(this._observers=[]),-1===this._observers.indexOf(t)?this._observers.push(t):console.log("WARNING attempt to add 2 times the same observer in glTFNode")}},removeObserver:{value:function(t){if(this._observers){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}}},_stylableProperties:{value:["visibility","offsetTransform","transformOrigin","transformZOrigin","cursor"]},styleableProperties:{get:function(){return this._stylableProperties}},initialValueForStyleableProperty:{value:function(t){return"visibility"===t?"visible":"offsetTransform"===t?Object.create(i).init():"originVector"===t?vec3.createFrom(50,50,50):"offsetMatrix"===t?mat4.identity():"transformOrigin"===t?vec2.createFrom(50,50):"transformZOrigin"===t?50:"cursor"===t?"auto":void 0}}})}});