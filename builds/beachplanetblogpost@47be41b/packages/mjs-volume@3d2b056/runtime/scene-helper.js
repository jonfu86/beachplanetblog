require("runtime/dependencies/gl-matrix");var Montage=require("montage").Montage,Uuid=require("montage/core/uuid").Uuid,glTFScene=require("runtime/glTF-scene").glTFScene,glTFNode=require("runtime/glTF-node").glTFNode,Scene=require("runtime/scene").Scene,Node=require("runtime/node").Node,SceneRenderer=require("runtime/scene-renderer").SceneRenderer,glTFMaterial=require("runtime/glTF-material").glTFMaterial,Utilities=require("runtime/utilities").Utilities,Projection=require("runtime/projection").Projection,Camera=require("runtime/camera").Camera,BBox=require("runtime/utilities").BBox,Set=require("collections/set"),Material=require("runtime/material").Material,SceneHelper=exports.SceneHelper=Object.create(Object.prototype,{getGLTFViewPoints:{value:function(t){var e=[],n=t.glTFElement.rootNode;return n.apply(function(t){return t.cameras&&t.cameras.length&&(e=e.concat(t)),null},!0,null),e}},getViewPoints:{value:function(t){var e=this.getGLTFViewPoints(t),n=[];return e.forEach(function(e){var i=Montage.create(Node);i.scene=t,i.id=e.baseId,n.push(i)},this),n}},createGLTFNodeIncludingCamera:{value:function(t){var e=Object.create(Projection);e.initWithDescription({type:"perspective",perspective:{yfov:45,aspectRatio:1,znear:.1,zfar:100}});var n=Object.create(Camera).init();n.projection=e;var i=Object.create(glTFNode).init();return n.name=i.name=t,i.id=Uuid.generate(),i.baseId=i.id,i.cameras.push(n),i}},createNodeIncludingCamera:{value:function(t,e){var n=SceneHelper.createGLTFNodeIncludingCamera(t),i=e.glTFElement;i.ids[n.baseId]=n;var r=Montage.create(Node);return r.scene=e,r.id=n.baseId,r}},getMaterialsFromNode:{value:function(t){var e=t.glTFElement,n=new Set,i=t.scene;return null!=e.meshes&&e.meshes.forEach(function(t){t.primitives&&t.primitives.forEach(function(t){var e,r=t.material;null==r.component3D?(e=Montage.create(Material),e.scene=i,e.id=r.baseId,i.glTFElement.ids[r.baseId]=r,r.component3D=e):e=r.component3D,n.add(e)},this)},this),n}},createNodeFromGlTFElementIfNeeded:{value:function(t,e){if(null!=t.component3D)return t.component3D;var n=new Node;return e.glTFElement.ids[t.baseId]=t,n.scene=e,n.id=t.baseId,t.component3D=n,n}},getGLTFCamera:{value:function(t){var e=null;if(t.glTFElement){var n=t.glTFElement;null!=n.cameras&&n.cameras.length>0&&(e=n.cameras[0])}return e}}});