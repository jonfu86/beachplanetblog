montageDefine("3d2b056","runtime/glTF-parser",{dependencies:[],factory:function(t,e,n){(function(t,i){"object"==typeof e?i(n.exports):"function"==typeof define&&define.amd?define([],function(){return i(t)}):i(t)})(this,function(t){"use strict";var e=["buffers","bufferViews","images","videos","samplers","textures","shaders","programs","techniques","materials","accessors","meshes","cameras","lights","skins","nodes","scenes","animations"],n=Object.create(Object.prototype,{_rootDescription:{value:null,writable:!0},rootDescription:{set:function(t){this._rootDescription=t},get:function(){return this._rootDescription}},baseURL:{value:null,writable:!0},_isAbsolutePath:{value:function(t){var e=RegExp("^"+window.location.protocol,"i");return t.match(e)?!0:!1}},resolvePathIfNeeded:{value:function(t){return this._isAbsolutePath(t)?t:this.baseURL+t}},_resolvePathsForCategories:{value:function(t){t.forEach(function(t){var e=this.json[t];if(e){var n=Object.keys(e);n.forEach(function(t){var n=e[t];n.path=this.resolvePathIfNeeded(n.path)},this)}},this)}},_json:{value:null,writable:!0},json:{enumerable:!0,get:function(){return this._json},set:function(t){this._json!==t&&(this._json=t,this._resolvePathsForCategories(["buffers","shaders","images","videos"]))}},_path:{value:null,writable:!0},getEntryDescription:{value:function(t,e){var n=null,i=e;return n=this.rootDescription[i],n?n?n[t]:null:(console.log("ERROR:CANNOT find expected category named:"+i),null)}},_stepToNextCategory:{value:function(){return this._state.categoryIndex=this.getNextCategoryIndex(this._state.categoryIndex+1),-1!==this._state.categoryIndex?(this._state.categoryState.index=0,!0):!1}},_stepToNextDescription:{enumerable:!1,value:function(){var t=this._state.categoryState,e=t.keys;return e?(t.index++,t.keys=null,t.index>=e.length?this._stepToNextCategory():!1):(console.log("INCONSISTENCY ERROR"),!1)}},hasCategory:{value:function(t){return this.rootDescription[t]?!0:!1}},_handleState:{value:function(){for(var t={buffers:this.handleBuffer,bufferViews:this.handleBufferView,shaders:this.handleShader,programs:this.handleProgram,techniques:this.handleTechnique,materials:this.handleMaterial,meshes:this.handleMesh,cameras:this.handleCamera,lights:this.handleLight,nodes:this.handleNode,scenes:this.handleScene,images:this.handleImage,animations:this.handleAnimation,accessors:this.handleAccessor,skins:this.handleSkin,samplers:this.handleSampler,textures:this.handleTexture,videos:this.handleVideo},n=!0;-1!==this._state.categoryIndex;){var i=e[this._state.categoryIndex],a=this._state.categoryState,r=a.keys;if(r||(a.keys=r=Object.keys(this.rootDescription[i]),!r||0!=r.length)){var s=i,o=r[a.index],l=this.getEntryDescription(o,s);if(l){if(t[s]&&t[s].call(this,o,l,this._state.userInfo)===!1){n=!1;break}this._stepToNextDescription()}else if(this.handleError){this.handleError("INCONSISTENCY ERROR: no description found for entry "+o),n=!1;break}}else this._stepToNextDescription()}this.handleLoadCompleted&&this.handleLoadCompleted(n)}},_loadJSONIfNeeded:{enumerable:!0,value:function(t){var e=this;if(this._json)t&&t(this.json);else{var n=this._path,i=n.lastIndexOf("/");this.baseURL=0!==i?n.substring(0,i+1):"";var a=new XMLHttpRequest;a.open("GET",n,!0),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&(e.json=JSON.parse(a.responseText),t&&t(e.json))},a.send(null)}}},_buildLoader:{value:function(t){function e(e){n.rootDescription=e,t&&t(this)}var n=this;this._loadJSONIfNeeded(e)}},_state:{value:null,writable:!0},_getEntryType:{value:function(){for(var t=e,n=0;t.length>n;n++){var i=this.rootDescription[t[n]];if(i)return t[n]}return null}},getNextCategoryIndex:{value:function(t){for(var n=t;e.length>n;n++)if(this.hasCategory(e[n]))return n;return-1}},load:{enumerable:!0,value:function(t,e){var n=this;this._buildLoader(function(){var i=n.getNextCategoryIndex.call(n,0);-1!==i&&(n._state={userInfo:t,options:e,categoryIndex:i,categoryState:{index:"0"}},n._handleState())})}},initWithPath:{value:function(t){return this._path=t,this._json=null,this}},_knownURLs:{writable:!0,value:{}},loaderContext:{value:function(){return this._knownURLs[this._path]===void 0&&(this._knownURLs[this._path]=Object.keys(this._knownURLs).length),"__"+this._knownURLs[this._path]}},initWithJSON:{value:function(t,e){return this.json=t,this.baseURL=e,e||console.log("WARNING: no base URL passed to Reader:initWithJSON"),this}}});return t&&(t.glTFParser=n),n})}});