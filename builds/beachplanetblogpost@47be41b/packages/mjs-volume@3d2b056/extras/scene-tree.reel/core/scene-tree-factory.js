var Montage=require("montage").Montage,SCENE_TREE_NODE=require("./scene-tree-node"),SceneTreeNode=SCENE_TREE_NODE.SceneTreeNode,NODE_TYPES=SCENE_TREE_NODE.SceneTreeNodeTypes;exports.SceneTreeFactory=Montage.specialize({constructor:{value:function(t){this.super(),this._configuration=t}},_configuration:{value:null},_sceneGraphTree:{value:null},buildWithGlTFTree:{value:function(t){if(t&&"object"==typeof t){var e=this,n=t.children;return this._resetEnvironment(),Array.isArray(n)&&n.forEach(function(t){var n=e._examineNode(t);e._sceneGraphTree.children.push(n)}),this._sceneGraphTree}}},_resetEnvironment:{value:function(){this._sceneGraphTree={children:[],root:!0}}},_examineNode:{value:function(t,e){var n=t.children,i=this._createSceneTreeNode(t,e);if(Array.isArray(n)){var a=this;n.forEach(function(t){var e=a._examineNode(t,i);i.rawChildren[e.name]=e})}return i}},_createSceneTreeNode:{value:function(t,e){var n=new SceneTreeNode(t,NODE_TYPES.NODE,e),i=t.meshes;return Array.isArray(i)&&this._configuration.get("meshesEnabled")&&i.forEach(function(t){n.rawChildren[t.name]=new SceneTreeNode(t,NODE_TYPES.MESH,n)}),n}}});