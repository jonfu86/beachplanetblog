montageDefine("3d2b056","extras/scene-tree.reel/core/scene-tree-factory",{dependencies:["montage","./scene-tree-node"],factory:function(t,e){var n=t("montage").Montage,i=t("./scene-tree-node"),a=i.SceneTreeNode,s=i.SceneTreeNodeTypes;e.SceneTreeFactory=n.specialize({constructor:{value:function(t){this.super(),this._configuration=t}},_configuration:{value:null},_sceneGraphTree:{value:null},buildWithGlTFTree:{value:function(t){if(t&&"object"==typeof t){var e=this,n=t.children;return this._resetEnvironment(),Array.isArray(n)&&n.forEach(function(t){var n=e._examineNode(t);e._sceneGraphTree.children.push(n)}),this._sceneGraphTree}}},_resetEnvironment:{value:function(){this._sceneGraphTree={children:[],root:!0}}},_examineNode:{value:function(t,e){var n=t.children,i=this._createSceneTreeNode(t,e);if(Array.isArray(n)){var a=this;n.forEach(function(t){var e=a._examineNode(t,i);i.rawChildren[e.name]=e})}return i}},_createSceneTreeNode:{value:function(t,e){var n=new a(t,s.NODE,e),i=t.meshes;return Array.isArray(i)&&this._configuration.get("meshesEnabled")&&i.forEach(function(t){n.rawChildren[t.name]=new a(t,s.MESH,n)}),n}}})}});