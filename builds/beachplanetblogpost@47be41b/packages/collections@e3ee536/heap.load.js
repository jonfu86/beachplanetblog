montageDefine("e3ee536","heap",{dependencies:["./listen/array-changes","./shim","./generic-collection","./listen/map-changes","./listen/range-changes","./listen/property-changes","heap"],factory:function(e,t,i){function n(e,t,i){return this instanceof n?(this.contentEquals=t||Object.equals,this.contentCompare=i||Object.compare,this.content=[],this.length=0,this.addEach(e),void 0):new n(e,t,i)}e("./listen/array-changes"),e("./shim");var s=e("./generic-collection"),a=e("./listen/map-changes"),o=e("./listen/range-changes"),r=e("./listen/property-changes");i.exports=n,n.Heap=n,Object.addEach(n.prototype,s.prototype),Object.addEach(n.prototype,r.prototype),Object.addEach(n.prototype,o.prototype),Object.addEach(n.prototype,a.prototype),n.prototype.constructClone=function(e){return new this.constructor(e,this.contentEquals,this.contentCompare)},n.prototype.push=function(e){this.content.push(e),this.float(this.content.length-1),this.length++},n.prototype.pop=function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content.set(0,t),this.sink(0)),this.length--,e},n.prototype.add=function(e){this.push(e)},n.prototype.indexOf=function(e){for(var t=0;this.length>t;t++)if(this.contentEquals(this.content[t],e))return t;return-1},n.prototype["delete"]=function(e,t){if(t)throw Error("Heap#delete does not support second argument: equals");var i=this.indexOf(e);if(-1===i)return!1;var n=this.content.pop();if(this.length=this.content.length,i===this.content.length)return!0;this.content.set(i,n);var s=this.contentCompare(n,e);return s>0?this.float(i):0>s&&this.sink(i),!0},n.prototype.peek=function(){return this.length?this.content[0]:void 0},n.prototype.max=function(){return this.peek()},n.prototype.one=function(){return this.peek()},n.prototype.float=function(e){for(var t=this.content[e];e>0;){var i=Math.floor((e+1)/2)-1,n=this.content[i];if(!(0>this.contentCompare(n,t)))break;this.content.set(i,t),this.content.set(e,n),e=i}},n.prototype.sink=function(e){for(var t,i,n,s,a,o,r=this.content.length,l=this.content[e];;){if(s=2*(e+1),n=s-1,o=!1,r>n){var t=this.content[n],u=this.contentCompare(t,l);u>0&&(a=n,o=!0)}if(r>s){var i=this.content[s],u=this.contentCompare(i,o?t:l);u>0&&(a=s,o=!0)}if(!o)break;this.content.set(e,this.content[a]),this.content.set(a,l),e=a}},n.prototype.clear=function(){this.content.clear(),this.length=0},n.prototype.reduce=function(e,t){var i=arguments[2];return this.content.reduce(function(t,n,s){return e.call(i,t,n,s,this)},t,this)},n.prototype.reduceRight=function(e,t){var i=arguments[2];return this.content.reduceRight(function(t,n,s){return e.call(i,t,n,s,this)},t,this)},n.prototype.toJSON=function(){return this.toArray()},n.prototype.makeObservable=function(){this.content.addRangeChangeListener(this,"content"),this.content.addBeforeRangeChangeListener(this,"content"),this.content.addMapChangeListener(this,"content"),this.content.addBeforeMapChangeListener(this,"content")},n.prototype.handleContentRangeChange=function(e,t,i){this.dispatchRangeChange(e,t,i)},n.prototype.handleContentRangeWillChange=function(e,t,i){this.dispatchBeforeRangeChange(e,t,i)},n.prototype.handleContentMapChange=function(e,t){this.dispatchMapChange(t,e)},n.prototype.handleContentMapWillChange=function(e,t){this.dispatchBeforeMapChange(t,e)}}});